import{_ as g,p as N,a as d,r as C,o as k,c as I,b as r,d as c,e,A as b,F as v,f as w,g as x,w as y,h as S,t as n,i as T,u as V,j as i}from"./index-BD0S9ZIj.js";const $={class:"cart-view"},B={class:"cart-list"},F=["src"],M={class:"info"},P={class:"price-info"},A={class:"price"},D=["onClick"],J={key:1,class:"cart-empty"},O={class:"footer"},j=["disabled"],E={__name:"CartView",setup(H){const h=V(),p=N.flatMap(o=>(o.photos||[]).map(t=>({...t,url:t.url||"",eventName:(d.find(a=>a.id===o.id)||{}).name||"",photographer:(d.find(a=>a.id===o.id)||{}).totalPhotographer||"",price:169}))),s=C([]);k(()=>{const o=JSON.parse(localStorage.getItem("cartItems")||"[]");o.length?s.value=o.map(t=>{const a=p.find(l=>l.id===t.id);return{...t,eventName:t.eventName||(a?a.eventName:""),photographer:t.photographer||(a?a.photographer:"")}}):s.value=p.filter(t=>t.url).slice(0,2)});const _=o=>{s.value.splice(o,1),localStorage.setItem("cartItems",JSON.stringify(s.value))},m=I(()=>s.value.reduce((o,t)=>o+t.price,0));function f(){h.push({name:"CartConfirm"})}return(o,t)=>{const a=S("router-link");return i(),r(v,null,[c(b),e("div",$,[t[4]||(t[4]=e("div",{class:"steps"},[e("p",{class:"active"},"訂單建立"),e("p",null,"訂單確認"),e("p",null,"確認支付"),e("div",{class:"steps-progress"}),e("div",{class:"steps-dot",style:{left:"15%"}})],-1)),e("div",B,[s.value.length>0?(i(!0),r(v,{key:0},w(s.value,(l,u)=>(i(),r("div",{class:"cart-item",key:u},[e("img",{src:l.url,alt:"photo",class:"photo"},null,8,F),e("div",M,[e("p",null,n(l.eventName),1),e("p",null,"攝影師: "+n(l.photographer),1),e("div",P,[e("p",A,"NT$"+n(l.price),1),e("button",{class:"fit-content delete",onClick:L=>_(u)},t[0]||(t[0]=[e("i",{class:"fa fa-trash-o","aria-hidden":"true"},null,-1)]),8,D)])])]))),128)):(i(),r("div",J,[t[2]||(t[2]=x(" 購物車沒有相片")),t[3]||(t[3]=e("br",null,null,-1)),c(a,{to:"/home"},{default:y(()=>t[1]||(t[1]=[e("a",null,"尋找活動相片",-1)])),_:1,__:[1]})]))]),e("footer",O,[e("div",null,[e("p",null,"典藏費用: NT$"+n(s.value.length>0?50:0)+"元",1),e("p",null,"相片共計: NT$"+n(m.value+(s.value.length>0?50:0))+"元",1)]),e("div",null,[e("button",{class:"next-step",disabled:s.value.length===0,onClick:f},"結算",8,j),e("span",null,"已選擇 "+n(s.value.length)+" 張相片",1)])]),c(T)])],64)}}},q=g(E,[["__scopeId","data-v-43217a5d"]]);export{q as default};
